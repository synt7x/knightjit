local test = require("tests/harness")

return section("integer", function()
	describe("conversions", function()
		describe("integer", function()
			it("simply returns itself", function()
				test.assert("0", "+0 0")
				test.assert("1", "+0 1")
				test.assert("-1", "+0 ~1")
				test.assert("123", "+0 123")
				test.assert("445", "+0 445")
				test.assert("111121", "+0 111121")
				test.assert("-5189023", "+0 ~5189023")
			end)
			it("can convert the minimum and maximum integers", function()
				test.assert("-2147483647", "+0 ~2147483647")
				test.assert("2147483647", "+0 2147483647")
			end)
		end)
		describe("string", function()
			it("converts to basic integers properly", function()
				test.assert("0", "+'' 0")
				test.assert("1", "+'' 1")
				test.assert("-1", "+'' ~1")
				test.assert("123", "+'' 123")
				test.assert("445", "+'' 445")
				test.assert("111121", "+'' 111121")
				test.assert("-5189023", "+'' ~5189023")
			end)
			it("converts the minimum and maximum integers", function()
				test.assert("-2147483647", "+'' ~2147483647")
				test.assert("2147483647", "+'' 2147483647")
			end)
		end)
		describe("boolean", function()
			it("returns false for zero", function()
				test.assert("false", "!! 0")
			end)
			it("returns true for anything else", function()
				test.assert("true", "!! 1")
				test.assert("true", "!! ~1")
				test.assert("true", "!! 123")
				test.assert("true", "!! 445")
				test.assert("true", "!! 111121")
				test.assert("true", "!! ~5189023")
			end)
			it("returns true for the minimum and maximum integers", function()
				test.assert("true", "!! ~2147483647")
				test.assert("true", "!! 2147483647")
			end)
		end)
	end)
end)
